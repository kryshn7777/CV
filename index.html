<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Krishnaprasath: Drone Flight (Zen Mode)</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Rajdhani:wght@400;600;700&display=swap');

        body {
            margin: 0;
            overflow: hidden;
            background-color: #050505;
            font-family: 'Rajdhani', sans-serif;
            color: #fff;
            touch-action: none; /* Prevent scroll on mobile */
        }

        #game-container {
            position: relative;
            width: 100vw;
            height: 100vh;
            overflow: hidden;
        }

        canvas {
            display: block;
        }

        /* HUD OVERLAY */
        #hud {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            pointer-events: none;
            box-sizing: border-box;
            padding: 20px;
            display: flex;
            flex-direction: column;
            justify-content: space-between;
        }

        .hud-top {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
        }

        .hud-panel {
            background: rgba(10, 20, 40, 0.7);
            border: 1px solid #00f0ff;
            padding: 15px;
            border-radius: 4px;
            backdrop-filter: blur(4px);
            box-shadow: 0 0 15px rgba(0, 240, 255, 0.2);
            max-width: 400px;
            transform: skewX(-10deg);
        }

        .hud-content {
            transform: skewX(10deg); /* Unskew text */
        }

        h1 {
            margin: 0;
            font-size: 24px;
            color: #00f0ff;
            text-transform: uppercase;
            letter-spacing: 2px;
        }

        h2 {
            margin: 5px 0 0 0;
            font-size: 16px;
            color: #fff;
            opacity: 0.8;
        }

        .progress-bar {
            width: 200px;
            height: 6px;
            background: #1a1a2e;
            margin-top: 10px;
            border: 1px solid #00f0ff;
        }

        .progress-fill {
            height: 100%;
            background: #00f0ff;
            width: 0%;
            transition: width 0.3s ease-out;
            box-shadow: 0 0 10px #00f0ff;
        }

        /* DATA LOG (Bottom Center) */
        .data-log-container {
            align-self: center;
            margin-bottom: 40px;
            width: 90%;
            max-width: 600px;
            min-height: 120px;
            background: linear-gradient(90deg, transparent, rgba(0, 240, 255, 0.1), transparent);
            border-top: 1px solid rgba(0, 240, 255, 0.3);
            border-bottom: 1px solid rgba(0, 240, 255, 0.3);
            display: flex;
            align-items: center;
            justify-content: center;
            text-align: center;
            position: relative;
        }

        #data-log {
            font-size: 18px;
            line-height: 1.4;
            color: #e0f7fa;
            text-shadow: 0 0 5px rgba(0, 240, 255, 0.5);
            padding: 10px;
        }

        .typing-cursor::after {
            content: '|';
            animation: blink 1s infinite;
        }

        @keyframes blink { 50% { opacity: 0; } }

        /* START SCREEN */
        #start-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(5, 5, 10, 0.9);
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            z-index: 100;
            pointer-events: auto;
        }

        .btn {
            background: transparent;
            color: #00f0ff;
            border: 2px solid #00f0ff;
            padding: 15px 40px;
            font-family: 'Rajdhani', sans-serif;
            font-size: 24px;
            font-weight: 700;
            text-transform: uppercase;
            letter-spacing: 2px;
            cursor: pointer;
            transition: all 0.3s;
            margin-top: 30px;
            position: relative;
            overflow: hidden;
        }

        .btn:hover {
            background: #00f0ff;
            color: #000;
            box-shadow: 0 0 30px #00f0ff;
        }

        .controls-hint {
            margin-top: 20px;
            color: #8899a6;
            font-size: 14px;
        }
    </style>
</head>
<body>

<div id="game-container">
    <canvas id="gameCanvas"></canvas>

    <!-- Start Screen -->
    <div id="start-screen">
        <h1 style="font-size: 60px; text-shadow: 0 0 20px #00f0ff;">KRISHNA'S<br>RESUME</h1>
        <p style="text-align: center; max-width: 500px; color: #b0bec5; font-size: 18px;">
            PILOT: <strong>Krishnaprasath Selvhakumar</strong><br>
            MISSION: Collect Data Nodes to Decrypt Resume
        </p>
        <button class="btn" onclick="game.start()">Start</button>
        <div class="controls-hint">Desktop: Mouse to Fly | Mobile: Touch & Drag</div>
    </div>

    <!-- HUD -->
    <div id="hud" style="opacity: 0; transition: opacity 1s;">
        <div class="hud-top">
            <div class="hud-panel">
                <div class="hud-content">
                    <h1>SYSTEM ONLINE</h1>
                    <h2 id="status-text">Scanning for data...</h2>
                    <div class="progress-bar">
                        <div id="progress-fill" class="progress-fill"></div>
                    </div>
                </div>
            </div>
            <div class="hud-panel" style="text-align: right;">
                <div class="hud-content">
                    <h1 id="score">0/6</h1>
                    <h2>NODES FOUND</h2>
                </div>
            </div>
        </div>

        <div class="data-log-container">
            <div id="data-log" class="typing-cursor">Waiting for input stream...</div>
        </div>
    </div>
</div>

<script>
/**
 * RESUME CONTENT
 * Extracted from the provided CV.pdf
 */
const RESUME_DATA = [
    {
        category: "IDENTITY",
        text: "Krishnaprasath Selvhakumar. Mechatronics Engineer & Game Developer. I bridge the gap between mechanical systems and digital intelligence.",
        color: "#ffffff"
    },
    {
        category: "EDUCATION",
        text: "B.E. Mechatronics from Sathyabama Institute of Science and Technology. CGPA: 8.55/10. Graduated Aug 2023.",
        color: "#00f0ff"
    },
    {
        category: "SKILLS",
        text: "Tech Stack: ROS 2, Unreal Engine 5, MATLAB, CATIA V5, AutoCAD. Languages: Python, C++, Java.",
        color: "#00ff99"
    },
    {
        category: "INTERNSHIPS",
        text: "Interned at Bheema CNC (Production & Quality) and KRS Industries (Maintenance Assistant). Experience with CNC, VMC, and PLC systems.",
        color: "#ffcc00"
    },
    {
        category: "PROJECTS",
        text: "Built 'Dynamic Drill' (Delta Robot), 'Agri Sentry' (Autonomous Rover), and 'Face Flow Safeguard' (IoT Attendance System).",
        color: "#ff00ff"
    },
    {
        category: "GAMEDEV",
        text: "Independent Game Developer (2019-Present). Published multiple games on Play Store using Unreal Engine 5. Focused on vehicle physics.",
        color: "#ff4444"
    },
    {
        category: "CONTACT",
        text: "Mission Complete. Contact: Kryshn2001@gmail.com | +91 6381078962 | Location: Chennai, India.",
        color: "#ffffff"
    }
];

class Game {
    constructor() {
        this.canvas = document.getElementById('gameCanvas');
        this.ctx = this.canvas.getContext('2d');
        this.width = window.innerWidth;
        this.height = window.innerHeight;
        this.canvas.width = this.width;
        this.canvas.height = this.height;

        // Game State
        this.active = false;
        this.nodesCollected = 0;
        this.currentNodeIndex = 0;
        
        // Input
        this.mouse = { x: this.width/2, y: this.height/2 };
        this.drone = { 
            x: 100, 
            y: this.height/2, 
            vx: 0, 
            vy: 0, 
            angle: 0,
            trail: [] 
        };

        // World - Adjusted for Zen Mode
        this.speed = 3; // Reduced from 4 for more chill vibe
        this.particles = [];
        this.orbs = [];
        this.decorations = []; // Background grid lines
        this.orbTimer = 300; // Start with a delay so user settles in
        this.distance = 0;

        // Audio (Simulated visuals for audio)
        this.pulse = 0;

        // Resize Listener
        window.addEventListener('resize', () => this.resize());
        
        // Input Listeners
        window.addEventListener('mousemove', e => this.handleInput(e.clientX, e.clientY));
        window.addEventListener('touchmove', e => {
            e.preventDefault();
            this.handleInput(e.touches[0].clientX, e.touches[0].clientY);
        }, { passive: false });
    }

    resize() {
        this.width = window.innerWidth;
        this.height = window.innerHeight;
        this.canvas.width = this.width;
        this.canvas.height = this.height;
    }

    handleInput(x, y) {
        this.mouse.x = x;
        this.mouse.y = y;
    }

    start() {
        document.getElementById('start-screen').style.display = 'none';
        document.getElementById('hud').style.opacity = 1;
        this.active = true;
        this.loop();
        this.typeText("System Initialized. Fly to Data Nodes to download resume packets.");
        // We do NOT spawn immediately anymore to give user a moment
    }

    spawnOrb() {
        if(this.currentNodeIndex >= RESUME_DATA.length) return;
        
        // Spawn ahead of screen
        const data = RESUME_DATA[this.currentNodeIndex];
        this.orbs.push({
            x: this.width + 100,
            y: Math.random() * (this.height - 200) + 100,
            radius: 30,
            color: data.color,
            data: data,
            index: this.currentNodeIndex
        });
    }

    typeText(text) {
        const el = document.getElementById('data-log');
        el.innerText = "";
        let i = 0;
        clearInterval(this.typeInterval);
        this.typeInterval = setInterval(() => {
            el.innerText += text.charAt(i);
            i++;
            if(i >= text.length) clearInterval(this.typeInterval);
        }, 40); // Slightly slower typing for readability
    }

    update() {
        this.pulse += 0.05;
        this.distance += this.speed;

        // --- Drone Physics (Fluid Follow) ---
        const dx = this.mouse.x - this.drone.x;
        const dy = this.mouse.y - this.drone.y;
        
        // Smooth acceleration towards mouse
        this.drone.vx += dx * 0.005;
        this.drone.vy += dy * 0.005;
        
        // Friction / Damping
        this.drone.vx *= 0.92;
        this.drone.vy *= 0.92;

        // Apply
        this.drone.x += this.drone.vx;
        this.drone.y += this.drone.vy;

        // Tilt based on vertical velocity
        this.drone.angle = this.drone.vy * 0.05;

        // Trail Logic
        if(this.active && Math.random() > 0.5) {
            this.drone.trail.push({
                x: this.drone.x - 20,
                y: this.drone.y,
                alpha: 1.0,
                life: 20
            });
        }
        
        // --- Background Generation ---
        if(Math.random() < 0.05) {
            this.decorations.push({
                x: this.width,
                y: Math.random() * this.height,
                w: Math.random() * 100 + 50,
                h: 2,
                speed: this.speed * (Math.random() * 0.5 + 0.5),
                alpha: Math.random() * 0.3
            });
        }

        // --- Orb Logic ---
        // Only trigger timer if no orbs are currently on screen
        if(this.orbs.length === 0 && this.currentNodeIndex < RESUME_DATA.length) {
            this.orbTimer++;
            // INCREASED DELAY: 400 frames ~ 6-7 seconds
            if(this.orbTimer > 400) { 
                this.spawnOrb();
                this.orbTimer = 0;
            }
        }

        for(let i = this.orbs.length - 1; i >= 0; i--) {
            let orb = this.orbs[i];
            orb.x -= this.speed;

            // Collision Detection
            const dist = Math.hypot(this.drone.x - orb.x, this.drone.y - orb.y);
            
            // Magnetic pull if close
            if(dist < 200) {
                orb.x -= (orb.x - this.drone.x) * 0.05;
                orb.y -= (orb.y - this.drone.y) * 0.05;
            }

            if(dist < 50) {
                // COLLECTED!
                this.collectOrb(orb);
                this.orbs.splice(i, 1);
            } else if(orb.x < -100) {
                // Missed orb - respawn it later quicker than usual
                this.orbs.splice(i, 1);
                this.orbTimer = 200; // Retry in 3 seconds instead of 7
            }
        }
    }

    collectOrb(orb) {
        // FX
        for(let i=0; i<20; i++) {
            this.particles.push({
                x: orb.x, y: orb.y,
                vx: (Math.random() - 0.5) * 10,
                vy: (Math.random() - 0.5) * 10,
                life: 60,
                color: orb.color
            });
        }

        // Logic
        this.currentNodeIndex++;
        this.nodesCollected++;
        
        // UI Update
        document.getElementById('status-text').innerText = `DOWNLOADING: ${orb.data.category}...`;
        document.getElementById('status-text').style.color = orb.color;
        document.getElementById('score').innerText = `${this.nodesCollected}/${RESUME_DATA.length}`;
        
        const pct = (this.nodesCollected / RESUME_DATA.length) * 100;
        document.getElementById('progress-fill').style.width = `${pct}%`;
        
        // Typewriter Effect
        this.typeText(orb.data.text);
    }

    draw() {
        // Clear
        this.ctx.fillStyle = '#050505';
        this.ctx.fillRect(0, 0, this.width, this.height);

        // Draw Grid (Perspective Simulation)
        this.ctx.strokeStyle = 'rgba(0, 240, 255, 0.1)';
        this.ctx.lineWidth = 1;
        this.ctx.beginPath();
        // Horizontal lines moving
        const offset = this.distance % 50;
        for(let y=0; y<this.height; y+=50) {
            this.ctx.moveTo(0, y);
            this.ctx.lineTo(this.width, y);
        }
        // Vertical lines moving left
        for(let x=this.width - offset; x > 0; x-=100) {
            this.ctx.moveTo(x, 0);
            this.ctx.lineTo(x, this.height);
        }
        this.ctx.stroke();

        // Draw Decorations (Speed lines)
        this.ctx.fillStyle = '#00f0ff';
        for(let i = this.decorations.length - 1; i >= 0; i--) {
            let d = this.decorations[i];
            d.x -= d.speed;
            this.ctx.globalAlpha = d.alpha;
            this.ctx.fillRect(d.x, d.y, d.w, d.h);
            this.ctx.globalAlpha = 1;
            if(d.x + d.w < 0) this.decorations.splice(i, 1);
        }

        // Draw Trail
        for(let i = this.drone.trail.length - 1; i >= 0; i--) {
            let t = this.drone.trail[i];
            t.x -= this.speed;
            t.life--;
            t.alpha = t.life / 20;
            this.ctx.fillStyle = `rgba(0, 240, 255, ${t.alpha})`;
            this.ctx.beginPath();
            this.ctx.arc(t.x, t.y, 2 + Math.random()*2, 0, Math.PI*2);
            this.ctx.fill();
            if(t.life <= 0) this.drone.trail.splice(i, 1);
        }

        // Draw Particles
        for(let i = this.particles.length - 1; i >= 0; i--) {
            let p = this.particles[i];
            p.x += p.vx;
            p.y += p.vy;
            p.life--;
            this.ctx.globalAlpha = p.life / 60;
            this.ctx.fillStyle = p.color;
            this.ctx.beginPath();
            this.ctx.arc(p.x, p.y, 3, 0, Math.PI*2);
            this.ctx.fill();
            this.ctx.globalAlpha = 1;
            if(p.life <= 0) this.particles.splice(i, 1);
        }

        // Draw Orbs
        this.orbs.forEach(orb => {
            // Glow
            const glow = this.ctx.createRadialGradient(orb.x, orb.y, 10, orb.x, orb.y, 50);
            glow.addColorStop(0, orb.color);
            glow.addColorStop(1, 'rgba(0,0,0,0)');
            this.ctx.fillStyle = glow;
            this.ctx.beginPath(); this.ctx.arc(orb.x, orb.y, 50, 0, Math.PI*2); this.ctx.fill();

            // Core
            this.ctx.fillStyle = '#fff';
            this.ctx.beginPath(); this.ctx.arc(orb.x, orb.y, 10, 0, Math.PI*2); this.ctx.fill();
            
            // Rings
            this.ctx.strokeStyle = orb.color;
            this.ctx.lineWidth = 2;
            this.ctx.beginPath();
            this.ctx.arc(orb.x, orb.y, 20 + Math.sin(this.pulse)*5, 0, Math.PI*2);
            this.ctx.stroke();
            
            // Label
            this.ctx.fillStyle = orb.color;
            this.ctx.font = '14px Rajdhani';
            this.ctx.textAlign = 'center';
            this.ctx.fillText(orb.data.category, orb.x, orb.y - 40);
        });

        // Draw Drone
        this.ctx.save();
        this.ctx.translate(this.drone.x, this.drone.y);
        this.ctx.rotate(this.drone.angle);

        // Drone Body (Sci-Fi Shape)
        this.ctx.fillStyle = '#111';
        this.ctx.strokeStyle = '#00f0ff';
        this.ctx.lineWidth = 2;
        
        this.ctx.beginPath();
        this.ctx.moveTo(20, 0);
        this.ctx.lineTo(-10, 15);
        this.ctx.lineTo(-20, 0);
        this.ctx.lineTo(-10, -15);
        this.ctx.closePath();
        this.ctx.fill();
        this.ctx.stroke();

        // Engine Glow
        this.ctx.fillStyle = '#00f0ff';
        this.ctx.beginPath(); this.ctx.arc(-20, 0, 5, 0, Math.PI*2); this.ctx.fill();
        
        // Cockpit
        this.ctx.fillStyle = '#fff';
        this.ctx.beginPath(); this.ctx.arc(0, 0, 5, 0, Math.PI*2); this.ctx.fill();

        this.ctx.restore();
    }

    loop() {
        if(!this.active) return;
        requestAnimationFrame(() => this.loop());
        this.update();
        this.draw();
    }
}

// Init
const game = new Game();
</script>
</body>
</html>

